# 报表插件（Baobiao）

## 插件简介

该插件提供完整的运营数据监控和报告功能，支持自动报告和手动查询。通过 Telegram 机器人命令，管理员可以随时获取运营数据、用户流量排行和服务器流量排行。

#### Telegram 命令对照表

| 命令 | 功能说明 | 时间范围参数 `天数` | 其他参数 | 输出重点 |
| --- | --- | --- | --- | --- |
| `/day [天数]` | 查询运营数据统计 | 默认 `0`（当天），`1` 为昨日，`N≥2` 为最近 `N` 天 | - | 用户新增/到期/续费、订单金额与笔数、支付渠道汇总、总收入 |
| `/top [天数]` | 查询用户流量排行 | 默认 `0`，`1` 为昨日，其余同上 | - | 用户邮箱+流量消耗（自动单位转换） |
| `/tops [天数]` | 查询服务器流量排行 | 默认 `0`，`1` 为昨日，其余同上 | - | 服务器名称/类型+流量消耗（自动单位转换） |

## 使用示例

```
# 查询当天运营数据
/day 0

# 查询最近7天运营数据
/day 7

# 查询最近7天用户流量排行（固定返回前10名）
/top 7

# 查询昨日服务器流量排行（固定返回前10名）
/tops 1

# 查询当天运营数据（默认）
/day
```

## 指标说明

- **续费率**：统计窗口内到期用户中，完成续费或升级（订单类型为 renew/upgrade）的用户占比，按用户去重计算。
- **未续费用户**：本周期内到期且未发生续费/升级的用户数。
- **订单统计**：按新购 / 续费 / 升级拆分订单数量与金额，帮助识别收入构成。
- **支付渠道统计**：汇总各支付方式的笔数与金额，便于评估渠道表现。
- **流量排行**：用户与服务器均固定展示前 10 名，确保 Telegram 输出稳定且易于阅读。
